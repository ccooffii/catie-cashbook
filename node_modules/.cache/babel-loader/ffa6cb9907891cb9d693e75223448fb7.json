{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from \"react\";\nexport const useRecords = () => {\n  _s();\n\n  const [records, setRecords] = useState([]);\n\n  const addRecord = record => {\n    setRecords([...records, record]);\n  };\n\n  useEffect(() => {\n    setRecords(JSON.parse(window.localStorage.getItem('records') || '[]'));\n  }, []);\n  const count = useRef(0);\n  useEffect(() => {\n    count.current += 1;\n  });\n  useEffect(() => {\n    if (count.current > 1) {\n      window.localStorage.setItem('records', JSON.stringify(records));\n    }\n  });\n};\n\n_s(useRecords, \"pnN/xkEvkaSeT0sffWlc2pRuiZ0=\");","map":{"version":3,"names":["useEffect","useRef","useState","useRecords","records","setRecords","addRecord","record","JSON","parse","window","localStorage","getItem","count","current","setItem","stringify"],"sources":["C:/Users/Cao/Desktop/cashbook-online-by-react/src/hooks/useRecords.tsx"],"sourcesContent":["import {useEffect, useRef, useState} from \"react\";\r\ntype RecordItem = {\r\n    tagIds:number[]\r\n    note:string\r\n    category:('+'|'-')\r\n    amount:number\r\n}\r\nexport const useRecords = () => {\r\n    const [records, setRecords] = useState<RecordItem[]>([])\r\n    const addRecord = (record:RecordItem) => {\r\n        setRecords([...records, record])\r\n    };\r\n    useEffect(()=>{\r\n        setRecords(JSON.parse(window.localStorage.getItem('records')||'[]'))\r\n    },[])\r\n    const count = useRef(0);\r\n    useEffect(() => {\r\n        count.current += 1;\r\n    })\r\n    useEffect(()=>{\r\n        if(count.current > 1){\r\n            window.localStorage.setItem('records',JSON.stringify(records))\r\n        }\r\n    })\r\n}"],"mappings":";;AAAA,SAAQA,SAAR,EAAmBC,MAAnB,EAA2BC,QAA3B,QAA0C,OAA1C;AAOA,OAAO,MAAMC,UAAU,GAAG,MAAM;EAAA;;EAC5B,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBH,QAAQ,CAAe,EAAf,CAAtC;;EACA,MAAMI,SAAS,GAAIC,MAAD,IAAuB;IACrCF,UAAU,CAAC,CAAC,GAAGD,OAAJ,EAAaG,MAAb,CAAD,CAAV;EACH,CAFD;;EAGAP,SAAS,CAAC,MAAI;IACVK,UAAU,CAACG,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,SAA5B,KAAwC,IAAnD,CAAD,CAAV;EACH,CAFQ,EAEP,EAFO,CAAT;EAGA,MAAMC,KAAK,GAAGZ,MAAM,CAAC,CAAD,CAApB;EACAD,SAAS,CAAC,MAAM;IACZa,KAAK,CAACC,OAAN,IAAiB,CAAjB;EACH,CAFQ,CAAT;EAGAd,SAAS,CAAC,MAAI;IACV,IAAGa,KAAK,CAACC,OAAN,GAAgB,CAAnB,EAAqB;MACjBJ,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA4B,SAA5B,EAAsCP,IAAI,CAACQ,SAAL,CAAeZ,OAAf,CAAtC;IACH;EACJ,CAJQ,CAAT;AAKH,CAjBM;;GAAMD,U"},"metadata":{},"sourceType":"module"}