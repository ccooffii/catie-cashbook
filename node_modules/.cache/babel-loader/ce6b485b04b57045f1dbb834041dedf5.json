{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { createId } from \"./lib/createId\";\nimport { useHref } from \"react-router-dom\";\nconst defaultTags = [{\n  id: 1,\n  name: '餐饮'\n}, {\n  id: 2,\n  name: '房租'\n}, {\n  id: 3,\n  name: '服装'\n}, {\n  id: 4,\n  name: '娱乐'\n}, {\n  id: 5,\n  name: '旅行'\n}, {\n  id: 6,\n  name: '美容'\n}, {\n  id: 7,\n  name: '汽车'\n}, {\n  id: 8,\n  name: '饮品'\n}, {\n  id: 9,\n  name: '宠物'\n}, {\n  id: 10,\n  name: '购物'\n}, {\n  id: 11,\n  name: '度假'\n}, {\n  id: 12,\n  name: '医疗'\n}];\n\nconst useTags = () => {\n  _s();\n\n  const [tags, setTags] = useState(defaultTags);\n  useEffect(() => {\n    setTags(JSON.parse(window.localStorage.getItem('tags') || '[]'));\n  }, []);\n  const count = useHref();\n  useEffect(() => {\n    count.current += 1;\n  });\n  useEffect(() => {\n    window.localStorage.setItem('tags', JSON.stringify(tags));\n    console.log(tags);\n  }, [tags]);\n  const iconMap = {\n    1: '餐饮',\n    2: '房租',\n    3: '服装',\n    4: '娱乐',\n    5: '旅行',\n    6: '美容',\n    7: '汽车',\n    8: '饮品',\n    9: '宠物',\n    10: '购物',\n    11: '度假',\n    12: '医疗'\n  };\n\n  const findTag = id => tags.filter(tag => tag.id === id)[0];\n\n  const findTagIndex = id => {\n    let result = -1;\n\n    for (let i = 0; i < tags.length; i++) {\n      if (tags[i].id === id) {\n        result = i;\n        break;\n      }\n    }\n\n    return result;\n  };\n\n  const updateTag = (id, obj) => {\n    setTags(tags.map(tag => {\n      if (tag.id === id) {\n        return {\n          id: id,\n          name: obj.name\n        };\n      } else {\n        return tag;\n      }\n    })); // const index = findTagIndex(id);\n    // const tempTags = JSON.parse(JSON.stringify(tags));\n    // tempTags.splice(index,1,{id:id,name:obj.name});\n    // setTags(tempTags);\n  };\n\n  const deleteTag = id => {\n    setTags(tags.filter(tag => tag.id !== id)); // const index = findTagIndex(id);\n    // const tempTags = JSON.parse(JSON.stringify(tags));\n    // tempTags.splice(index,1);\n    // setTags(tempTags);\n  };\n\n  const addTag = () => {\n    const newTagName = window.prompt('新标签名字为');\n\n    if (newTagName !== null) {\n      setTags([...tags, {\n        id: createId(),\n        name: newTagName\n      }]);\n    }\n  };\n\n  return {\n    tags,\n    iconMap,\n    setTags,\n    addTag,\n    updateTag,\n    findTag,\n    findTagIndex,\n    deleteTag\n  };\n};\n\n_s(useTags, \"Fl+wz56LcZTxfns6iHznI/x+v5g=\", false, function () {\n  return [useHref];\n});\n\nexport { useTags };","map":{"version":3,"names":["useEffect","useState","createId","useHref","defaultTags","id","name","useTags","tags","setTags","JSON","parse","window","localStorage","getItem","count","current","setItem","stringify","console","log","iconMap","findTag","filter","tag","findTagIndex","result","i","length","updateTag","obj","map","deleteTag","addTag","newTagName","prompt"],"sources":["C:/Users/Cao/Desktop/cashbook-online-by-react/src/useTags.tsx"],"sourcesContent":["import {useEffect, useState} from \"react\";\r\nimport {createId} from \"./lib/createId\";\r\nimport {useHref} from \"react-router-dom\";\r\n\r\nconst defaultTags = [\r\n    {id:1,name:'餐饮'},\r\n    {id:2,name:'房租'},\r\n    {id:3,name:'服装'},\r\n    {id:4,name:'娱乐'},\r\n    {id:5,name:'旅行'},\r\n    {id:6,name:'美容'},\r\n    {id:7,name:'汽车'},\r\n    {id:8,name:'饮品'},\r\n    {id:9,name:'宠物'},\r\n    {id:10,name:'购物'},\r\n    {id:11,name:'度假'},\r\n    {id:12,name:'医疗'},\r\n]\r\n\r\nconst useTags =() => {\r\n    const [tags, setTags] = useState<{ id:number;name:string }[]>(defaultTags);\r\n    useEffect(()=>{\r\n        setTags(JSON.parse(window.localStorage.getItem('tags')||'[]'))\r\n    },[])\r\n    const count = useHref()\r\n    useEffect(() =>{\r\n        count.current += 1;\r\n        }\r\n    )\r\n    useEffect(()=>{\r\n        window.localStorage.setItem('tags',JSON.stringify(tags))\r\n        console.log(tags)\r\n    },[tags])\r\n    const iconMap:{[k:string]:string} ={\r\n        1:'餐饮',\r\n        2:'房租',\r\n        3:'服装',\r\n        4:'娱乐',\r\n        5:'旅行',\r\n        6:'美容',\r\n        7:'汽车',\r\n        8:'饮品',\r\n        9:'宠物',\r\n        10:'购物',\r\n        11:'度假',\r\n        12:'医疗'};\r\n\r\n    const findTag = (id:number) => tags.filter(tag => tag.id === id)[0];\r\n    const findTagIndex = (id:number) => {\r\n        let result = -1;\r\n        for(let i=0; i<tags.length;i++) {\r\n            if(tags[i].id === id){\r\n                result = i;\r\n                break;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    const updateTag = (id:number,obj:{name:string}) => {\r\n        setTags(tags.map(tag => {\r\n            if(tag.id === id){\r\n                return {id:id,name:obj.name};\r\n            }else {\r\n                return tag;\r\n            }\r\n        }))\r\n        // const index = findTagIndex(id);\r\n        // const tempTags = JSON.parse(JSON.stringify(tags));\r\n        // tempTags.splice(index,1,{id:id,name:obj.name});\r\n        // setTags(tempTags);\r\n    }\r\n    const deleteTag = (id:number) => {\r\n        setTags(tags.filter(tag=>tag.id !== id))\r\n        // const index = findTagIndex(id);\r\n        // const tempTags = JSON.parse(JSON.stringify(tags));\r\n        // tempTags.splice(index,1);\r\n        // setTags(tempTags);\r\n    }\r\n    const addTag = () => {\r\n        const newTagName = window.prompt('新标签名字为')\r\n        if (newTagName !== null){\r\n            setTags([...tags,{id:createId(),name:newTagName}]);\r\n        }\r\n    }\r\n    return{tags,iconMap,setTags,addTag,updateTag,findTag,findTagIndex,deleteTag}\r\n}\r\nexport {useTags};"],"mappings":"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"},"metadata":{},"sourceType":"module"}