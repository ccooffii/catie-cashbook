{"ast":null,"code":"import _objectSpread from\"C:/Users/Cao/Desktop/cashbook-online-by-react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Cao/Desktop/cashbook-online-by-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"C:/Users/Cao/Desktop/cashbook-online-by-react/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import Layout from\"../components/Layout\";import React,{useState}from\"react\";import styled from\"styled-components\";import{CategorySection}from\"./count/CategorySection\";import{NumberPadSection}from\"./count/NumberPad\";import{PayTagsSection}from\"./count/PayTagListSection\";import{useRecords}from\"../hooks/useRecords\";import{IncomeTagListSection}from\"./count/IncomeTagListSection\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyLayout=styled(Layout)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n    &.category{\\n      display: none;\\n    }\\n\"])));var defaultFormData={tagIds:[],note:'',category:'-',amount:0};function Count(){var _useState=useState(defaultFormData),_useState2=_slicedToArray(_useState,2),selected=_useState2[0],setSelected=_useState2[1];var _onChange=function onChange(obj){setSelected(_objectSpread(_objectSpread({},selected),obj));};var _useRecords=useRecords(),addRecord=_useRecords.addRecord;var submit=function submit(){if(selected.amount===0){return alert('请输入金额');}else if(selected.tagIds.length<=0){return alert('请选择一个标签');}else{addRecord(selected);alert('提交成功');window.location.reload();}};if(selected.category==='-'){return/*#__PURE__*/_jsxs(MyLayout,{children:[/*#__PURE__*/_jsx(CategorySection,{value:selected.category,onChange:function onChange(category){return _onChange({category:category});}}),/*#__PURE__*/_jsx(PayTagsSection,{value:selected.tagIds,onChange:function onChange(tagIds){return _onChange({tagIds:tagIds});}}),/*#__PURE__*/_jsx(NumberPadSection,{noteValue:selected.note,noteValueOnChange:function noteValueOnChange(note){return _onChange({note:note});},padValue:selected.amount,padValueOnChange:function padValueOnChange(amount){return _onChange({amount:amount});},onOK:submit})]});}else{return/*#__PURE__*/_jsxs(MyLayout,{children:[/*#__PURE__*/_jsx(CategorySection,{value:selected.category,onChange:function onChange(category){return _onChange({category:category});}}),/*#__PURE__*/_jsx(IncomeTagListSection,{value:selected.tagIds,onChange:function onChange(tagIds){return _onChange({tagIds:tagIds});}}),/*#__PURE__*/_jsx(NumberPadSection,{noteValue:selected.note,noteValueOnChange:function noteValueOnChange(note){return _onChange({note:note});},padValue:selected.amount,padValueOnChange:function padValueOnChange(amount){return _onChange({amount:amount});},onOK:submit})]});}}export default Count;","map":{"version":3,"names":["Layout","React","useState","styled","CategorySection","NumberPadSection","PayTagsSection","useRecords","IncomeTagListSection","MyLayout","defaultFormData","tagIds","note","category","amount","Count","selected","setSelected","onChange","obj","addRecord","submit","alert","length","window","location","reload"],"sources":["C:/Users/Cao/Desktop/cashbook-online-by-react/src/views/Count.tsx"],"sourcesContent":["import Layout from \"../components/Layout\";\r\nimport React, {useState} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {CategorySection} from \"./count/CategorySection\";\r\nimport {NumberPadSection} from \"./count/NumberPad\";\r\nimport {PayTagsSection} from \"./count/PayTagListSection\";\r\nimport {useRecords} from \"../hooks/useRecords\";\r\nimport {IncomeTagListSection} from \"./count/IncomeTagListSection\";\r\n\r\nconst MyLayout = styled(Layout)`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    &.category{\r\n      display: none;\r\n    }\r\n`\r\nconst defaultFormData = {\r\n    tagIds: [] as number[],\r\n    note: ''as string,\r\n    category:'-' as ('-'|'+'),\r\n    amount: 0 as number,\r\n}\r\nfunction Count() {\r\n    const [selected,setSelected] = useState(defaultFormData)\r\n    const onChange = (obj:Partial<typeof selected>) => {\r\n        setSelected({\r\n            ...selected,\r\n            ...obj\r\n        })\r\n    }\r\n    const {addRecord} = useRecords()\r\n    const submit = () => {\r\n        if(selected.amount === 0){\r\n            return alert('请输入金额');\r\n        }else if(selected.tagIds.length<=0){\r\n            return alert('请选择一个标签');\r\n        }else {\r\n            addRecord(selected)\r\n            alert('提交成功')\r\n            window.location.reload()\r\n        }\r\n    }\r\n    if(selected.category==='-'){\r\n        return (\r\n            <MyLayout>\r\n                <CategorySection\r\n                    value={selected.category}\r\n                    onChange={category => onChange({category})}\r\n                >\r\n                </CategorySection>\r\n                <PayTagsSection\r\n                    value={selected.tagIds}\r\n                    onChange={tagIds => onChange({tagIds})}\r\n                >\r\n                </PayTagsSection>\r\n                <NumberPadSection\r\n                    noteValue = {selected.note}\r\n                    noteValueOnChange={note => onChange({note})}\r\n                    padValue= {selected.amount}\r\n                    padValueOnChange={amount => onChange({amount})}\r\n                    onOK={submit}\r\n                >\r\n                </NumberPadSection>\r\n            </MyLayout>\r\n        )\r\n    }else {\r\n        return(\r\n            <MyLayout>\r\n                <CategorySection\r\n                    value={selected.category}\r\n                    onChange={category => onChange({category})}\r\n                >\r\n                </CategorySection>\r\n                <IncomeTagListSection\r\n                    value={selected.tagIds}\r\n                    onChange={tagIds => onChange({tagIds})}>\r\n                </IncomeTagListSection>\r\n                <NumberPadSection\r\n                    noteValue = {selected.note}\r\n                    noteValueOnChange={note => onChange({note})}\r\n                    padValue= {selected.amount}\r\n                    padValueOnChange={amount => onChange({amount})}\r\n                    onOK={submit}\r\n                >\r\n                </NumberPadSection>\r\n            </MyLayout>\r\n            )\r\n    }\r\n}\r\nexport default Count;"],"mappings":"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"},"metadata":{},"sourceType":"module"}