{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from \"react\";\nexport const useRecords = () => {\n  _s();\n\n  const [records, setRecords] = useState([]); // const addRecord = (record:RecordItem) => {\n  //     setRecords([...records, record])\n  // };\n\n  const addRecord = tempRecord => {\n    if (tempRecord.amount <= 0) {\n      return;\n    }\n\n    if (tempRecord.tagIds.length === 0) {\n      return alert('请选择一个标签');\n    }\n\n    const record = { ...tempRecord,\n      createdAt: new Date().toISOString()\n    };\n    setRecords([...records, record]);\n  };\n\n  const getAmount = record => {};\n\n  useEffect(() => {\n    setRecords(JSON.parse(window.localStorage.getItem('records') || '[]'));\n  }, []);\n  const count = useRef(0);\n  useEffect(() => {\n    count.current += 1;\n  });\n  useEffect(() => {\n    if (count.current > 1) {\n      window.localStorage.setItem('records', JSON.stringify(records));\n    }\n  });\n  return {\n    records,\n    addRecord,\n    getAmount\n  };\n};\n\n_s(useRecords, \"pnN/xkEvkaSeT0sffWlc2pRuiZ0=\");","map":{"version":3,"names":["useEffect","useRef","useState","useRecords","records","setRecords","addRecord","tempRecord","amount","tagIds","length","alert","record","createdAt","Date","toISOString","getAmount","JSON","parse","window","localStorage","getItem","count","current","setItem","stringify"],"sources":["C:/Users/Cao/Desktop/cashbook-online-by-react/src/hooks/useRecords.tsx"],"sourcesContent":["import {useEffect, useRef, useState} from \"react\";\r\nexport  type RecordItem = {\r\n    tagIds:number[]\r\n    note:string\r\n    category:('+'|'-')\r\n    amount:number\r\n    createdAt: string\r\n}\r\ntype tempRecordItem = {\r\n    tagIds:number[]\r\n    note:string\r\n    category:('+'|'-')\r\n    amount:number\r\n}\r\nexport const useRecords = () => {\r\n    const [records, setRecords] = useState<RecordItem[]>([])\r\n    // const addRecord = (record:RecordItem) => {\r\n    //     setRecords([...records, record])\r\n    // };\r\n    const addRecord = (tempRecord:tempRecordItem) => {\r\n        if(tempRecord.amount <= 0){return}\r\n        if(tempRecord.tagIds.length === 0){\r\n            return alert('请选择一个标签');\r\n        }\r\n        const record = {...tempRecord,createdAt:(new Date().toISOString())}\r\n        setRecords([...records,record])\r\n    };\r\n    const getAmount = (record:RecordItem) => {\r\n\r\n    }\r\n    useEffect(()=>{\r\n        setRecords(JSON.parse(window.localStorage.getItem('records')||'[]'))\r\n    },[])\r\n    const count = useRef(0);\r\n    useEffect(() => {\r\n        count.current += 1;\r\n    })\r\n    useEffect(()=>{\r\n        if(count.current > 1){\r\n            window.localStorage.setItem('records',JSON.stringify(records))\r\n        }\r\n    })\r\n    return{records,addRecord,getAmount}\r\n}"],"mappings":";;AAAA,SAAQA,SAAR,EAAmBC,MAAnB,EAA2BC,QAA3B,QAA0C,OAA1C;AAcA,OAAO,MAAMC,UAAU,GAAG,MAAM;EAAA;;EAC5B,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBH,QAAQ,CAAe,EAAf,CAAtC,CAD4B,CAE5B;EACA;EACA;;EACA,MAAMI,SAAS,GAAIC,UAAD,IAA+B;IAC7C,IAAGA,UAAU,CAACC,MAAX,IAAqB,CAAxB,EAA0B;MAAC;IAAO;;IAClC,IAAGD,UAAU,CAACE,MAAX,CAAkBC,MAAlB,KAA6B,CAAhC,EAAkC;MAC9B,OAAOC,KAAK,CAAC,SAAD,CAAZ;IACH;;IACD,MAAMC,MAAM,GAAG,EAAC,GAAGL,UAAJ;MAAeM,SAAS,EAAE,IAAIC,IAAJ,GAAWC,WAAX;IAA1B,CAAf;IACAV,UAAU,CAAC,CAAC,GAAGD,OAAJ,EAAYQ,MAAZ,CAAD,CAAV;EACH,CAPD;;EAQA,MAAMI,SAAS,GAAIJ,MAAD,IAAuB,CAExC,CAFD;;EAGAZ,SAAS,CAAC,MAAI;IACVK,UAAU,CAACY,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,SAA5B,KAAwC,IAAnD,CAAD,CAAV;EACH,CAFQ,EAEP,EAFO,CAAT;EAGA,MAAMC,KAAK,GAAGrB,MAAM,CAAC,CAAD,CAApB;EACAD,SAAS,CAAC,MAAM;IACZsB,KAAK,CAACC,OAAN,IAAiB,CAAjB;EACH,CAFQ,CAAT;EAGAvB,SAAS,CAAC,MAAI;IACV,IAAGsB,KAAK,CAACC,OAAN,GAAgB,CAAnB,EAAqB;MACjBJ,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA4B,SAA5B,EAAsCP,IAAI,CAACQ,SAAL,CAAerB,OAAf,CAAtC;IACH;EACJ,CAJQ,CAAT;EAKA,OAAM;IAACA,OAAD;IAASE,SAAT;IAAmBU;EAAnB,CAAN;AACH,CA7BM;;GAAMb,U"},"metadata":{},"sourceType":"module"}