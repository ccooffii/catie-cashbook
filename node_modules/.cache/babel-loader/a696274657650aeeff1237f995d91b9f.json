{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/Cao/Desktop/cashbook-online-by-react/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import Layout from\"../components/Layout\";import React from\"react\";import styled from\"styled-components\";import{useRecords}from\"../hooks/useRecords\";import{useTags}from\"../hooks/useTags\";import Icon from\"../components/Icon\";import dayjs from\"dayjs\";import{useDate}from\"../hooks/useDate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StatisticsLayOut=styled(Layout)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n>header{\\n  background-color:rgb(246,208,164);\\n  height: 50px;\\n  width: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  font-weight: bolder;\\n  font-size: 20px;\\n  margin-bottom: 10px;\\n}\\n  >ul{\\n    display: flex;\\n    flex-direction: column;\\n    padding-left: 8px;\\n    padding-right: 8px;\\n    overflow-y: scroll;\\n    flex-grow: 1;\\n    >.date{\\n      margin-left: 5px;\\n      display: flex;\\n      flex-direction: column;\\n      justify-content: flex-start;\\n      margin-bottom: 2px;\\n    }\\n    >li{\\n      box-shadow: inset -2px -3px 0px rgba(0,0,0,0.25);\\n      background-color:rgb(254,251,240) ;\\n      border-radius: 5px;\\n      display: flex;\\n      flex-direction: row;\\n      justify-content: space-between;\\n      align-items: center;\\n      height: 40px;\\n      width: 100%;\\n      margin-bottom: 4px;\\n      z-index: 2;\\n      border: 1px solid black;\\n      >.name{\\n        display: flex;\\n        flex-direction: row;\\n        margin-right: 30vw;\\n        align-items: center;\\n        margin-left: 7px;\\n        >div{\\n          display: flex;\\n          flex-direction: column;\\n          margin-left: 5px;\\n          >.note{\\n            color: #777;\\n            font-size: 10px;\\n          }\\n        }\\n        >svg{\\n          height: 30px;\\n          width: 30px;\\n          margin-right: 5px;\\n        }\\n      }\\n      >.amount{\\n        display: flex;\\n        flex-direction: column;\\n        align-items: flex-end;\\n        margin-right: 7px;\\n        >.money{\\n          font-weight: bold;\\n          color: #555;\\n          font-size: 12px;\\n        }\\n      }\\n    }\\n    \\n  }\\n\"])));function Statistics(){var _useRecords=useRecords(),records=_useRecords.records;var _useTags=useTags(),IconMap=_useTags.IconMap,getName=_useTags.getName;var _useDate=useDate(),findToday=_useDate.findToday,findMonth=_useDate.findMonth,findDay=_useDate.findDay;var hashDay={};records.map(function(record){var key=dayjs(record.createdAt).format('YYYY-MM-DD');if(!(key in hashDay)){hashDay[key]=[];}hashDay[key].push(record);});var array=Object.entries(hashDay).sort(function(a,b){if(a[0]===b[0])return 0;if(a[0]<b[0])return 1;if(a[0]>b[0])return-1;return 0;});return/*#__PURE__*/_jsxs(StatisticsLayOut,{children:[/*#__PURE__*/_jsx(\"header\",{children:\"\\u6536\\u652F\\u660E\\u7EC6\"}),array.map(function(x){return/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"date\",children:[/*#__PURE__*/_jsx(\"span\",{children:x[0]}),/*#__PURE__*/_jsx(\"span\",{children:findToday(x[0])})]}),x[1].map(function(record){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"name\",children:[/*#__PURE__*/_jsx(Icon,{name:IconMap[record.tagIds[0]]||'猫猫'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:getName(record.tagIds[0])}),/*#__PURE__*/_jsx(\"span\",{className:\"note\",children:record.note})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"amount\",children:[/*#__PURE__*/_jsx(\"span\",{children:record.category==='-'?'支出':'收入'}),/*#__PURE__*/_jsxs(\"span\",{className:\"money\",children:[\"\\uFFE5\",record.amount]})]})]},record.createdAt);})]});})]});}export default Statistics;","map":{"version":3,"names":["Layout","React","styled","useRecords","useTags","Icon","dayjs","useDate","StatisticsLayOut","Statistics","records","IconMap","getName","findToday","findMonth","findDay","hashDay","map","record","key","createdAt","format","push","array","Object","entries","sort","a","b","x","tagIds","note","category","amount"],"sources":["C:/Users/Cao/Desktop/cashbook-online-by-react/src/views/Statistics.tsx"],"sourcesContent":["import Layout from \"../components/Layout\";\r\nimport React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {RecordItem, useRecords} from \"../hooks/useRecords\";\r\nimport {useTags} from \"../hooks/useTags\";\r\nimport Icon from \"../components/Icon\";\r\nimport dayjs from \"dayjs\"\r\nimport {useDate} from \"../hooks/useDate\";\r\nconst StatisticsLayOut = styled(Layout)`\r\n>header{\r\n  background-color:rgb(246,208,164);\r\n  height: 50px;\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: bolder;\r\n  font-size: 20px;\r\n  margin-bottom: 10px;\r\n}\r\n  >ul{\r\n    display: flex;\r\n    flex-direction: column;\r\n    padding-left: 8px;\r\n    padding-right: 8px;\r\n    overflow-y: scroll;\r\n    flex-grow: 1;\r\n    >.date{\r\n      margin-left: 5px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: flex-start;\r\n      margin-bottom: 2px;\r\n    }\r\n    >li{\r\n      box-shadow: inset -2px -3px 0px rgba(0,0,0,0.25);\r\n      background-color:rgb(254,251,240) ;\r\n      border-radius: 5px;\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      height: 40px;\r\n      width: 100%;\r\n      margin-bottom: 4px;\r\n      z-index: 2;\r\n      border: 1px solid black;\r\n      >.name{\r\n        display: flex;\r\n        flex-direction: row;\r\n        margin-right: 30vw;\r\n        align-items: center;\r\n        margin-left: 7px;\r\n        >div{\r\n          display: flex;\r\n          flex-direction: column;\r\n          margin-left: 5px;\r\n          >.note{\r\n            color: #777;\r\n            font-size: 10px;\r\n          }\r\n        }\r\n        >svg{\r\n          height: 30px;\r\n          width: 30px;\r\n          margin-right: 5px;\r\n        }\r\n      }\r\n      >.amount{\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: flex-end;\r\n        margin-right: 7px;\r\n        >.money{\r\n          font-weight: bold;\r\n          color: #555;\r\n          font-size: 12px;\r\n        }\r\n      }\r\n    }\r\n    \r\n  }\r\n`\r\nfunction Statistics() {\r\n    const {records} = useRecords()\r\n    const {IconMap,getName} = useTags()\r\n    const {findToday,findMonth,findDay} = useDate()\r\n    const hashDay : {[k:string]:RecordItem[]} = {};\r\n    records.map(record => {\r\n        const key = dayjs(record.createdAt).format('YYYY-MM-DD')\r\n        if(!(key in hashDay)){\r\n            hashDay[key] = []\r\n        }\r\n        hashDay[key].push(record)\r\n    })\r\n    const array = Object.entries(hashDay).sort((a,b)=>{\r\n        if (a[0]===b[0]) return 0\r\n        if(a[0]<b[0]) return 1\r\n        if(a[0]>b[0]) return -1\r\n        return 0\r\n    })\r\n    return (\r\n        <StatisticsLayOut>\r\n            <header>\r\n                收支明细\r\n            </header>\r\n            {array.map(x=> <ul>\r\n                <div className=\"date\">\r\n                    <span>\r\n                        {x[0]}\r\n                    </span>\r\n                    <span>\r\n                        {findToday(x[0])}\r\n                    </span>\r\n                </div>\r\n                {x[1].map(record => {\r\n                    return <li key={record.createdAt}>\r\n                        <div className=\"name\">\r\n                            <Icon name={IconMap[record.tagIds[0]]||'猫猫'}></Icon>\r\n                            <div>\r\n                                <span>{getName(record.tagIds[0])}</span>\r\n                                <span className='note'>{record.note}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"amount\">\r\n                            <span>{record.category==='-'?'支出':'收入'}</span>\r\n                            <span className=\"money\">￥{record.amount}</span>\r\n                        </div>\r\n                    </li>\r\n                })}\r\n\r\n            </ul>)}\r\n        </StatisticsLayOut>\r\n    );\r\n}\r\nexport default Statistics;"],"mappings":"uKAAA,MAAOA,OAAP,KAAmB,sBAAnB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,OAAP,KAAmB,mBAAnB,CACA,OAAoBC,UAApB,KAAqC,qBAArC,CACA,OAAQC,OAAR,KAAsB,kBAAtB,CACA,MAAOC,KAAP,KAAiB,oBAAjB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAAQC,OAAR,KAAsB,kBAAtB,C,wFACA,GAAMC,iBAAgB,CAAGN,MAAM,CAACF,MAAD,CAAT,srDAAtB,CA2EA,QAASS,WAAT,EAAsB,CAClB,gBAAkBN,UAAU,EAA5B,CAAOO,OAAP,aAAOA,OAAP,CACA,aAA0BN,OAAO,EAAjC,CAAOO,OAAP,UAAOA,OAAP,CAAeC,OAAf,UAAeA,OAAf,CACA,aAAsCL,OAAO,EAA7C,CAAOM,SAAP,UAAOA,SAAP,CAAiBC,SAAjB,UAAiBA,SAAjB,CAA2BC,OAA3B,UAA2BA,OAA3B,CACA,GAAMC,QAAmC,CAAG,EAA5C,CACAN,OAAO,CAACO,GAAR,CAAY,SAAAC,MAAM,CAAI,CAClB,GAAMC,IAAG,CAAGb,KAAK,CAACY,MAAM,CAACE,SAAR,CAAL,CAAwBC,MAAxB,CAA+B,YAA/B,CAAZ,CACA,GAAG,EAAEF,GAAG,GAAIH,QAAT,CAAH,CAAqB,CACjBA,OAAO,CAACG,GAAD,CAAP,CAAe,EAAf,CACH,CACDH,OAAO,CAACG,GAAD,CAAP,CAAaG,IAAb,CAAkBJ,MAAlB,EACH,CAND,EAOA,GAAMK,MAAK,CAAGC,MAAM,CAACC,OAAP,CAAeT,OAAf,EAAwBU,IAAxB,CAA6B,SAACC,CAAD,CAAGC,CAAH,CAAO,CAC9C,GAAID,CAAC,CAAC,CAAD,CAAD,GAAOC,CAAC,CAAC,CAAD,CAAZ,CAAiB,MAAO,EAAP,CACjB,GAAGD,CAAC,CAAC,CAAD,CAAD,CAAKC,CAAC,CAAC,CAAD,CAAT,CAAc,MAAO,EAAP,CACd,GAAGD,CAAC,CAAC,CAAD,CAAD,CAAKC,CAAC,CAAC,CAAD,CAAT,CAAc,MAAO,CAAC,CAAR,CACd,MAAO,EAAP,CACH,CALa,CAAd,CAMA,mBACI,MAAC,gBAAD,yBACI,oDADJ,CAIKL,KAAK,CAACN,GAAN,CAAU,SAAAY,CAAC,qBAAG,mCACX,aAAK,SAAS,CAAC,MAAf,wBACI,sBACKA,CAAC,CAAC,CAAD,CADN,EADJ,cAII,sBACKhB,SAAS,CAACgB,CAAC,CAAC,CAAD,CAAF,CADd,EAJJ,GADW,CASVA,CAAC,CAAC,CAAD,CAAD,CAAKZ,GAAL,CAAS,SAAAC,MAAM,CAAI,CAChB,mBAAO,mCACH,aAAK,SAAS,CAAC,MAAf,wBACI,KAAC,IAAD,EAAM,IAAI,CAAEP,OAAO,CAACO,MAAM,CAACY,MAAP,CAAc,CAAd,CAAD,CAAP,EAA2B,IAAvC,EADJ,cAEI,oCACI,sBAAOlB,OAAO,CAACM,MAAM,CAACY,MAAP,CAAc,CAAd,CAAD,CAAd,EADJ,cAEI,aAAM,SAAS,CAAC,MAAhB,UAAwBZ,MAAM,CAACa,IAA/B,EAFJ,GAFJ,GADG,cAQH,aAAK,SAAS,CAAC,QAAf,wBACI,sBAAOb,MAAM,CAACc,QAAP,GAAkB,GAAlB,CAAsB,IAAtB,CAA2B,IAAlC,EADJ,cAEI,cAAM,SAAS,CAAC,OAAhB,oBAA0Bd,MAAM,CAACe,MAAjC,GAFJ,GARG,GAASf,MAAM,CAACE,SAAhB,CAAP,CAaH,CAdA,CATU,GAAH,EAAX,CAJL,GADJ,CAiCH,CACD,cAAeX,WAAf"},"metadata":{},"sourceType":"module"}