{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from \"react\";\nexport const useRecords = () => {\n  _s();\n\n  const [records, setRecords] = useState([]);\n\n  const addRecord = tempRecord => {\n    if (tempRecord.amount <= 0) {\n      return;\n    }\n\n    if (tempRecord.tagIds.length === 0) {\n      return;\n    }\n\n    const record = { ...tempRecord,\n      createdAt: new Date().toISOString()\n    };\n    setRecords([...records, record]);\n  };\n\n  useEffect(() => {\n    setRecords(JSON.parse(window.localStorage.getItem('records') || '[]'));\n  }, []);\n  const count = useRef(0);\n  useEffect(() => {\n    count.current += 1;\n  });\n  useEffect(() => {\n    if (count.current > 1) {\n      window.localStorage.setItem('records', JSON.stringify(records));\n    }\n  });\n  return {\n    records,\n    addRecord\n  };\n};\n\n_s(useRecords, \"pnN/xkEvkaSeT0sffWlc2pRuiZ0=\");","map":{"version":3,"names":["useEffect","useRef","useState","useRecords","records","setRecords","addRecord","tempRecord","amount","tagIds","length","record","createdAt","Date","toISOString","JSON","parse","window","localStorage","getItem","count","current","setItem","stringify"],"sources":["C:/Users/Cao/Desktop/cashbook-online-by-react/src/hooks/useRecords.tsx"],"sourcesContent":["import {useEffect, useRef, useState} from \"react\";\r\nexport type RecordItem = {\r\n    tagIds:number[]\r\n    note:string\r\n    category:('+'|'-')\r\n    amount:number\r\n    createdAt: string\r\n}\r\ntype tempRecordItem = {\r\n    tagIds:number[]\r\n    note:string\r\n    category:('+'|'-')\r\n    amount:number\r\n}\r\nexport const useRecords = () => {\r\n    const [records, setRecords] = useState<RecordItem[]>([])\r\n    const addRecord = (tempRecord:tempRecordItem) => {\r\n        if(tempRecord.amount <= 0){return}\r\n        if(tempRecord.tagIds.length === 0){\r\n            return;\r\n        }\r\n        const record = {...tempRecord,createdAt:(new Date().toISOString())}\r\n        setRecords([...records,record])\r\n    };\r\n    useEffect(()=>{\r\n        setRecords(JSON.parse(window.localStorage.getItem('records')||'[]'))\r\n    },[])\r\n    const count = useRef(0);\r\n    useEffect(() => {\r\n        count.current += 1;\r\n    })\r\n    useEffect(()=>{\r\n        if(count.current > 1){\r\n            window.localStorage.setItem('records',JSON.stringify(records))\r\n        }\r\n    })\r\n    return{records,addRecord}\r\n}"],"mappings":";;AAAA,SAAQA,SAAR,EAAmBC,MAAnB,EAA2BC,QAA3B,QAA0C,OAA1C;AAcA,OAAO,MAAMC,UAAU,GAAG,MAAM;EAAA;;EAC5B,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBH,QAAQ,CAAe,EAAf,CAAtC;;EACA,MAAMI,SAAS,GAAIC,UAAD,IAA+B;IAC7C,IAAGA,UAAU,CAACC,MAAX,IAAqB,CAAxB,EAA0B;MAAC;IAAO;;IAClC,IAAGD,UAAU,CAACE,MAAX,CAAkBC,MAAlB,KAA6B,CAAhC,EAAkC;MAC9B;IACH;;IACD,MAAMC,MAAM,GAAG,EAAC,GAAGJ,UAAJ;MAAeK,SAAS,EAAE,IAAIC,IAAJ,GAAWC,WAAX;IAA1B,CAAf;IACAT,UAAU,CAAC,CAAC,GAAGD,OAAJ,EAAYO,MAAZ,CAAD,CAAV;EACH,CAPD;;EAQAX,SAAS,CAAC,MAAI;IACVK,UAAU,CAACU,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,SAA5B,KAAwC,IAAnD,CAAD,CAAV;EACH,CAFQ,EAEP,EAFO,CAAT;EAGA,MAAMC,KAAK,GAAGnB,MAAM,CAAC,CAAD,CAApB;EACAD,SAAS,CAAC,MAAM;IACZoB,KAAK,CAACC,OAAN,IAAiB,CAAjB;EACH,CAFQ,CAAT;EAGArB,SAAS,CAAC,MAAI;IACV,IAAGoB,KAAK,CAACC,OAAN,GAAgB,CAAnB,EAAqB;MACjBJ,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA4B,SAA5B,EAAsCP,IAAI,CAACQ,SAAL,CAAenB,OAAf,CAAtC;IACH;EACJ,CAJQ,CAAT;EAKA,OAAM;IAACA,OAAD;IAASE;EAAT,CAAN;AACH,CAvBM;;GAAMH,U"},"metadata":{},"sourceType":"module"}