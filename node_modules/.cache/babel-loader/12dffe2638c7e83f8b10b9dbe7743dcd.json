{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Cao/Desktop/cashbook-online-by-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Cao/Desktop/cashbook-online-by-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from\"react\";import{createId}from\"../lib/createId\";var useTags=function useTags(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),Tags=_useState2[0],setTags=_useState2[1];useEffect(function(){var localTags=JSON.parse(window.localStorage.getItem('tags')||'[]');if(localTags.length===0){localTags=[{id:createId(),name:'餐饮',category:'-'},{id:createId(),name:'房租',category:'-'},{id:createId(),name:'服装',category:'-'},{id:createId(),name:'娱乐',category:'-'},{id:createId(),name:'旅行',category:'-'},{id:createId(),name:'美容',category:'-'},{id:createId(),name:'汽车',category:'-'},{id:createId(),name:'饮品',category:'-'},{id:createId(),name:'宠物',category:'-'},{id:createId(),name:'购物',category:'-'},{id:createId(),name:'度假',category:'-'},{id:createId(),name:'医疗',category:'-'},{id:createId(),name:'工资',category:'+'},{id:createId(),name:'奖金',category:'+'},{id:createId(),name:'兼职',category:'+'},{id:createId(),name:'投资',category:'+'},{id:createId(),name:'转账',category:'+'}];}setTags(localTags);},[]);var count=useRef(0);useEffect(function(){count.current+=1;});useEffect(function(){if(count.current>1){window.localStorage.setItem('tags',JSON.stringify(Tags));}},[Tags]);var IconMap={1:'餐饮',2:'房租',3:'服装',4:'娱乐',5:'旅行',6:'美容',7:'汽车',8:'饮品',9:'宠物',10:'购物',11:'度假',12:'医疗',13:'薪水',14:'奖金',15:'兼职',16:'投资',17:'收款'};var findTag=function findTag(id){return Tags.filter(function(tag){return tag.id===id;})[0];};var findTagIndex=function findTagIndex(id){var result=-1;for(var i=0;i<Tags.length;i++){if(Tags[i].id===id){result=i;break;}}return result;};var updateTag=function updateTag(id,obj){setTags(Tags.map(function(tag){if(tag.id===id){return{id:id,name:obj.name,category:obj.category};}else{return tag;}}));};var deleteTag=function deleteTag(id){setTags(Tags.filter(function(tag){return tag.id!==id;}));};var addPayTag=function addPayTag(){var newTagName=window.prompt('新标签名字为');if(newTagName!==null&&newTagName!==''){setTags([].concat(_toConsumableArray(Tags),[{id:createId(),name:newTagName,category:'-'}]));}};var addIncomeTag=function addIncomeTag(){var newTagName=window.prompt('新标签名字为');if(newTagName!==null&&newTagName!==''){setTags([].concat(_toConsumableArray(Tags),[{id:createId(),name:newTagName,category:'+'}]));}};var getName=function getName(id){var tag=Tags.filter(function(tag){return tag.id===id;})[0];if(tag){return tag.name;}else{return'';}};return{tags:Tags,IconMap:IconMap,getName:getName,setTags:setTags,addPayTag:addPayTag,addIncomeTag:addIncomeTag,updateTag:updateTag,findTag:findTag,findTagIndex:findTagIndex,deleteTag:deleteTag};};export{useTags};","map":{"version":3,"names":["useEffect","useRef","useState","createId","useTags","Tags","setTags","localTags","JSON","parse","window","localStorage","getItem","length","id","name","category","count","current","setItem","stringify","IconMap","findTag","filter","tag","findTagIndex","result","i","updateTag","obj","map","deleteTag","addPayTag","newTagName","prompt","addIncomeTag","getName","tags"],"sources":["C:/Users/Cao/Desktop/cashbook-online-by-react/src/hooks/useTags.tsx"],"sourcesContent":["import {useEffect, useRef, useState} from \"react\";\r\nimport {createId} from \"../lib/createId\";\r\nconst useTags =() => {\r\n    const [Tags, setTags] = useState<{ id:number;name:string;category:('+'|'-')}[]>([]);\r\n        useEffect(()=>{\r\n            let localTags = JSON.parse(window.localStorage.getItem('tags')||'[]')\r\n            if(localTags.length === 0){\r\n                localTags = [\r\n                    {id:createId(),name:'餐饮',category:'-'},\r\n                    {id:createId(),name:'房租',category:'-'},\r\n                    {id:createId(),name:'服装',category:'-'},\r\n                    {id:createId(),name:'娱乐',category:'-'},\r\n                    {id:createId(),name:'旅行',category:'-'},\r\n                    {id:createId(),name:'美容',category:'-'},\r\n                    {id:createId(),name:'汽车',category:'-'},\r\n                    {id:createId(),name:'饮品',category:'-'},\r\n                    {id:createId(),name:'宠物',category:'-'},\r\n                    {id:createId(),name:'购物',category:'-'},\r\n                    {id:createId(),name:'度假',category:'-'},\r\n                    {id:createId(),name:'医疗',category:'-'},\r\n                    {id:createId(),name:'工资',category:'+'},\r\n                    {id:createId(),name:'奖金',category:'+'},\r\n                    {id:createId(),name:'兼职',category:'+'},\r\n                    {id:createId(),name:'投资',category:'+'},\r\n                    {id:createId(),name:'转账',category:'+'},\r\n                ]\r\n            }\r\n            setTags(localTags)\r\n        },[])\r\n    const count = useRef(0);\r\n    useEffect(() =>{\r\n        count.current += 1;\r\n        }\r\n    )\r\n    useEffect(()=>{\r\n        if(count.current > 1){\r\n            window.localStorage.setItem('tags',JSON.stringify(Tags))\r\n        }\r\n    },[Tags])\r\n    const IconMap:{[k:string]:string} ={\r\n        1:'餐饮',\r\n        2:'房租',\r\n        3:'服装',\r\n        4:'娱乐',\r\n        5:'旅行',\r\n        6:'美容',\r\n        7:'汽车',\r\n        8:'饮品',\r\n        9:'宠物',\r\n        10:'购物',\r\n        11:'度假',\r\n        12:'医疗',\r\n        13:'薪水',\r\n        14:'奖金',\r\n        15:'兼职',\r\n        16:'投资',\r\n        17:'收款',};\r\n    const findTag = (id:number) => Tags.filter(tag => tag.id === id)[0];\r\n    const findTagIndex = (id:number) => {\r\n        let result = -1;\r\n        for(let i=0; i<Tags.length; i++) {\r\n            if(Tags[i].id === id){\r\n                result = i;\r\n                break;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const updateTag = (id:number,obj:{name:string;category:('+'|'-')}) => {\r\n        setTags(Tags.map(tag => {\r\n            if(tag.id === id){\r\n                return {id:id,name:obj.name,category:obj.category};\r\n            }else {\r\n                return tag;\r\n            }\r\n        }))\r\n    }\r\n    const deleteTag = (id:number) => {\r\n        setTags(Tags.filter(tag=>tag.id !== id))\r\n    }\r\n    const addPayTag = () => {\r\n        const newTagName = window.prompt('新标签名字为')\r\n        if (newTagName !== null && newTagName !== ''){\r\n            setTags([...Tags,{id:createId(),name:newTagName,category:'-'}]);\r\n        }\r\n    }\r\n    const addIncomeTag = () => {\r\n        const newTagName = window.prompt('新标签名字为')\r\n        if (newTagName !== null && newTagName !== ''){\r\n            setTags([...Tags,{id:createId(),name:newTagName,category:'+'}]);\r\n        }\r\n    }\r\n    const getName = (id:number) => {\r\n        const tag = Tags.filter(tag=>tag.id===id)[0]\r\n        if(tag){\r\n            return tag.name\r\n        }else {\r\n            return ''\r\n        }\r\n    }\r\n    return{tags: Tags,IconMap,getName,setTags,addPayTag,addIncomeTag,updateTag,findTag,findTagIndex,deleteTag}\r\n}\r\nexport {useTags};"],"mappings":"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"},"metadata":{},"sourceType":"module"}