{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { createId } from \"../lib/createId\";\n\nconst useTags = () => {\n  _s();\n\n  const [Tags, setTags] = useState([]);\n  const [PayTags, setPayTags] = useState([]);\n\n  const getPayTags = tags => {\n    if (tags.category = '+') {\n      return;\n    }\n\n    setPayTags([...PayTags, tags]);\n  };\n\n  useEffect(() => {\n    let localTags = JSON.parse(window.localStorage.getItem('tags') || '[]');\n\n    if (localTags.length === 0) {\n      localTags = [{\n        id: createId(),\n        name: '餐饮',\n        category: '-'\n      }, {\n        id: createId(),\n        name: '房租',\n        category: '-'\n      }, {\n        id: createId(),\n        name: '服装',\n        category: '-'\n      }, {\n        id: createId(),\n        name: '娱乐',\n        category: '-'\n      }, {\n        id: createId(),\n        name: '旅行',\n        category: '-'\n      }, {\n        id: createId(),\n        name: '美容',\n        category: '-'\n      }, {\n        id: createId(),\n        name: '汽车',\n        category: '-'\n      }, {\n        id: createId(),\n        name: '饮品',\n        category: '-'\n      }, {\n        id: createId(),\n        name: '宠物',\n        category: '-'\n      }, {\n        id: createId(),\n        name: '购物',\n        category: '-'\n      }, {\n        id: createId(),\n        name: '度假',\n        category: '-'\n      }, {\n        id: createId(),\n        name: '医疗',\n        category: '-'\n      }, {\n        id: createId(),\n        name: '工资',\n        category: '+'\n      }, {\n        id: createId(),\n        name: '红包',\n        category: '+'\n      }, {\n        id: createId(),\n        name: '奖金',\n        category: '+'\n      }, {\n        id: createId(),\n        name: '转账',\n        category: '+'\n      }, {\n        id: createId(),\n        name: '投资',\n        category: '+'\n      }, {\n        id: createId(),\n        name: '兼职',\n        category: '+'\n      }];\n    }\n\n    setTags(localTags);\n  }, []);\n  const count = useRef(0);\n  useEffect(() => {\n    count.current += 1;\n  });\n  useEffect(() => {\n    if (count.current > 1) {\n      window.localStorage.setItem('tags', JSON.stringify(Tags));\n    }\n  }, [Tags]);\n  const IconMap = {\n    1: '餐饮',\n    2: '房租',\n    3: '服装',\n    4: '娱乐',\n    5: '旅行',\n    6: '美容',\n    7: '汽车',\n    8: '饮品',\n    9: '宠物',\n    10: '购物',\n    11: '度假',\n    12: '医疗',\n    13: '薪水',\n    14: 'redbag',\n    15: '奖金',\n    16: '收款',\n    17: '投资',\n    18: '兼职'\n  };\n\n  const findTag = id => Tags.filter(tag => tag.id === id)[0];\n\n  const findTagIndex = id => {\n    let result = -1;\n\n    for (let i = 0; i < Tags.length; i++) {\n      if (Tags[i].id === id) {\n        result = i;\n        break;\n      }\n    }\n\n    return result;\n  };\n\n  const updateTag = (id, obj) => {\n    setTags(Tags.map(tag => {\n      if (tag.id === id) {\n        return {\n          id: id,\n          name: obj.name,\n          category: obj.category\n        };\n      } else {\n        return tag;\n      }\n    }));\n  };\n\n  const deleteTag = id => {\n    setTags(Tags.filter(tag => tag.id !== id));\n  };\n\n  const addPayTag = () => {\n    const newTagName = window.prompt('新标签名字为');\n\n    if (newTagName !== null && newTagName !== '') {\n      setTags([...Tags, {\n        id: createId(),\n        name: newTagName,\n        category: '-'\n      }]);\n    }\n  };\n\n  const getName = id => {\n    const tag = Tags.filter(tag => tag.id === id)[0];\n\n    if (tag) {\n      return tag.name;\n    } else {\n      return '';\n    }\n  };\n\n  return {\n    tags: Tags,\n    IconMap,\n    PayTags,\n    getName,\n    setTags,\n    addPayTag,\n    updateTag,\n    findTag,\n    findTagIndex,\n    deleteTag,\n    getPayTags\n  };\n};\n\n_s(useTags, \"M8nopotWDrzN1LDpsRhHZ6QpbLA=\");\n\nexport { useTags };","map":{"version":3,"names":["useEffect","useRef","useState","createId","useTags","Tags","setTags","PayTags","setPayTags","getPayTags","tags","category","localTags","JSON","parse","window","localStorage","getItem","length","id","name","count","current","setItem","stringify","IconMap","findTag","filter","tag","findTagIndex","result","i","updateTag","obj","map","deleteTag","addPayTag","newTagName","prompt","getName"],"sources":["C:/Users/Cao/Desktop/cashbook-online-by-react/src/hooks/useTags.tsx"],"sourcesContent":["import {useEffect, useRef, useState} from \"react\";\r\nimport {createId} from \"../lib/createId\";\r\nconst useTags =() => {\r\n    const [Tags, setTags] = useState<{ id:number;name:string;category:('+'|'-')}[]>([]);\r\n    const [PayTags, setPayTags] = useState<{ id:number;name:string;category:('+'|'-')}[]>([]);\r\n    const getPayTags = (tags:{ id:number;name:string;category:('+'|'-')}) =>{\r\n        if(tags.category='+'){\r\n            return\r\n        }\r\n        setPayTags([...PayTags,tags])\r\n    }\r\n    useEffect(()=>{\r\n        let localTags = JSON.parse(window.localStorage.getItem('tags')||'[]')\r\n        if(localTags.length === 0){\r\n            localTags = [\r\n                {id:createId(),name:'餐饮',category:'-'},\r\n                {id:createId(),name:'房租',category:'-'},\r\n                {id:createId(),name:'服装',category:'-'},\r\n                {id:createId(),name:'娱乐',category:'-'},\r\n                {id:createId(),name:'旅行',category:'-'},\r\n                {id:createId(),name:'美容',category:'-'},\r\n                {id:createId(),name:'汽车',category:'-'},\r\n                {id:createId(),name:'饮品',category:'-'},\r\n                {id:createId(),name:'宠物',category:'-'},\r\n                {id:createId(),name:'购物',category:'-'},\r\n                {id:createId(),name:'度假',category:'-'},\r\n                {id:createId(),name:'医疗',category:'-'},\r\n                {id:createId(),name:'工资',category:'+'},\r\n                {id:createId(),name:'红包',category:'+'},\r\n                {id:createId(),name:'奖金',category:'+'},\r\n                {id:createId(),name:'转账',category:'+'},\r\n                {id:createId(),name:'投资',category:'+'},\r\n                {id:createId(),name:'兼职',category:'+'},\r\n            ]\r\n        }\r\n        setTags(localTags)\r\n    },[])\r\n    const count = useRef(0);\r\n    useEffect(() =>{\r\n        count.current += 1;\r\n        }\r\n    )\r\n    useEffect(()=>{\r\n        if(count.current > 1){\r\n            window.localStorage.setItem('tags',JSON.stringify(Tags))\r\n        }\r\n    },[Tags])\r\n    const IconMap:{[k:string]:string} ={\r\n        1:'餐饮',\r\n        2:'房租',\r\n        3:'服装',\r\n        4:'娱乐',\r\n        5:'旅行',\r\n        6:'美容',\r\n        7:'汽车',\r\n        8:'饮品',\r\n        9:'宠物',\r\n        10:'购物',\r\n        11:'度假',\r\n        12:'医疗',\r\n        13:'薪水',\r\n        14:'redbag',\r\n        15:'奖金',\r\n        16:'收款',\r\n        17:'投资',\r\n        18:'兼职'\r\n        };\r\n    const findTag = (id:number) => Tags.filter(tag => tag.id === id)[0];\r\n    const findTagIndex = (id:number) => {\r\n        let result = -1;\r\n        for(let i=0; i<Tags.length; i++) {\r\n            if(Tags[i].id === id){\r\n                result = i;\r\n                break;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    const updateTag = (id:number,obj:{name:string;category:('+'|'-')}) => {\r\n        setTags(Tags.map(tag => {\r\n            if(tag.id === id){\r\n                return {id:id,name:obj.name,category:obj.category};\r\n            }else {\r\n                return tag;\r\n            }\r\n        }))\r\n    }\r\n    const deleteTag = (id:number) => {\r\n        setTags(Tags.filter(tag=>tag.id !== id))\r\n    }\r\n    const addPayTag = () => {\r\n        const newTagName = window.prompt('新标签名字为')\r\n        if (newTagName !== null && newTagName !== ''){\r\n            setTags([...Tags,{id:createId(),name:newTagName,category:'-'}]);\r\n        }\r\n    }\r\n    const getName = (id:number) => {\r\n        const tag = Tags.filter(tag=>tag.id===id)[0]\r\n        if(tag){\r\n            return tag.name\r\n        }else {\r\n            return ''\r\n        }\r\n    }\r\n    return{tags: Tags,IconMap,PayTags,getName,setTags,addPayTag,updateTag,findTag,findTagIndex,deleteTag,getPayTags}\r\n}\r\nexport {useTags};"],"mappings":"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"},"metadata":{},"sourceType":"module"}