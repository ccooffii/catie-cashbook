{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from \"react\";\nexport const useRecords = () => {\n  _s();\n\n  const [records, setRecords] = useState([]); // const addRecord = (record:RecordItem) => {\n  //     setRecords([...records, record])\n  // };\n\n  const addRecord = tempRecord => {\n    const record = { ...tempRecord,\n      createdAt: new Date().toISOString()\n    };\n    setRecords([...records]);\n  };\n\n  useEffect(() => {\n    setRecords(JSON.parse(window.localStorage.getItem('records') || '[]'));\n  }, []);\n  const count = useRef(0);\n  useEffect(() => {\n    count.current += 1;\n  });\n  useEffect(() => {\n    if (count.current > 1) {\n      window.localStorage.setItem('records', JSON.stringify(records));\n    }\n  });\n  return {\n    records,\n    addRecord\n  };\n};\n\n_s(useRecords, \"pnN/xkEvkaSeT0sffWlc2pRuiZ0=\");","map":{"version":3,"names":["useEffect","useRef","useState","useRecords","records","setRecords","addRecord","tempRecord","record","createdAt","Date","toISOString","JSON","parse","window","localStorage","getItem","count","current","setItem","stringify"],"sources":["C:/Users/Cao/Desktop/cashbook-online-by-react/src/hooks/useRecords.tsx"],"sourcesContent":["import {useEffect, useRef, useState} from \"react\";\r\ntype RecordItem = {\r\n    tagIds:number[]\r\n    note:string\r\n    category:('+'|'-')\r\n    amount:number\r\n    createdAt: string\r\n}\r\ntype tempRecordItem = {\r\n    tagIds:number[]\r\n    note:string\r\n    category:('+'|'-')\r\n}\r\nexport const useRecords = () => {\r\n    const [records, setRecords] = useState<RecordItem[]>([])\r\n    // const addRecord = (record:RecordItem) => {\r\n    //     setRecords([...records, record])\r\n    // };\r\n    const addRecord = (tempRecord:tempRecordItem) => {\r\n        const record = {...tempRecord,createdAt:(new Date().toISOString())}\r\n        setRecords([...records])\r\n    };\r\n    useEffect(()=>{\r\n        setRecords(JSON.parse(window.localStorage.getItem('records')||'[]'))\r\n    },[])\r\n    const count = useRef(0);\r\n    useEffect(() => {\r\n        count.current += 1;\r\n    })\r\n    useEffect(()=>{\r\n        if(count.current > 1){\r\n            window.localStorage.setItem('records',JSON.stringify(records))\r\n        }\r\n    })\r\n    return{records,addRecord}\r\n}"],"mappings":";;AAAA,SAAQA,SAAR,EAAmBC,MAAnB,EAA2BC,QAA3B,QAA0C,OAA1C;AAaA,OAAO,MAAMC,UAAU,GAAG,MAAM;EAAA;;EAC5B,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBH,QAAQ,CAAe,EAAf,CAAtC,CAD4B,CAE5B;EACA;EACA;;EACA,MAAMI,SAAS,GAAIC,UAAD,IAA+B;IAC7C,MAAMC,MAAM,GAAG,EAAC,GAAGD,UAAJ;MAAeE,SAAS,EAAE,IAAIC,IAAJ,GAAWC,WAAX;IAA1B,CAAf;IACAN,UAAU,CAAC,CAAC,GAAGD,OAAJ,CAAD,CAAV;EACH,CAHD;;EAIAJ,SAAS,CAAC,MAAI;IACVK,UAAU,CAACO,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,SAA5B,KAAwC,IAAnD,CAAD,CAAV;EACH,CAFQ,EAEP,EAFO,CAAT;EAGA,MAAMC,KAAK,GAAGhB,MAAM,CAAC,CAAD,CAApB;EACAD,SAAS,CAAC,MAAM;IACZiB,KAAK,CAACC,OAAN,IAAiB,CAAjB;EACH,CAFQ,CAAT;EAGAlB,SAAS,CAAC,MAAI;IACV,IAAGiB,KAAK,CAACC,OAAN,GAAgB,CAAnB,EAAqB;MACjBJ,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA4B,SAA5B,EAAsCP,IAAI,CAACQ,SAAL,CAAehB,OAAf,CAAtC;IACH;EACJ,CAJQ,CAAT;EAKA,OAAM;IAACA,OAAD;IAASE;EAAT,CAAN;AACH,CAtBM;;GAAMH,U"},"metadata":{},"sourceType":"module"}